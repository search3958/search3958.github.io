<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search3958</title><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Albert+Sans:wght@100..900&family=Noto+Sans+JP:wght@100..900&family=Unbounded:wght@200..900&display=swap" rel="stylesheet">
    <script type="importmap">
    {
      "imports": {
        "@material/web/": "https://esm.run/@material/web/"
      }
    }
  </script>
  <script type="module">
    import '@material/web/all.js';
    import {styles as typescaleStyles} from '@material/web/typography/md-typescale-styles.js';

    document.adoptedStyleSheets.push(typescaleStyles.styleSheet);
  </script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Albert Sans","Zen Kaku Gothic New",sans-serif;
            line-height: 1.5;
        }
        :root{
          --md-ripple-hover-color:#0000;
          --header-width: 279px;
    --header-expanded-width: 279px;
          --section-raius:64px;
          --mac-color:#fff;
        }
        body {
            height: calc(fit-content - 40px);
            background: #EFF3F6;
        }
        a{
          color:#000;
    text-decoration: none;
        }
        h1{
          font-family: "Unbounded", sans-serif;
  font-optical-sizing: auto;
  font-weight: 400;
  font-size:3.5em;
  margin-bottom:24px;
  position:relative;
  top:130px;
  z-index:6;
    color: #A2A2A2;
    mix-blend-mode: plus-lighter; 
    animation: h1anm 1s cubic-bezier(.62,0,0,1) forwards;
      animation-delay: 1.3s;
        }

    @keyframes h1anm {
      to {
        top:0px;
      }
    }
.toph2 {
    position: relative;
  top:130px;
        opacity: 0;
    z-index: 6;
    font-weight: bold;
    color: #888;
    mix-blend-mode: plus-lighter;
    animation: h2anm 1s cubic-bezier(.62,0,0,1) forwards;
      animation-delay: 1.4s;
      filter:blur(8px);
}
    @keyframes h2anm {
      to {
        top:-16px;
        opacity: 1;
        filter:blur(0px);
      }
    }

        #lensFx_canvas {
            position: fixed;
            top: 24px;
  left: 50%;
  transform: translateX(-50%);
            width: var(--header-width);
            height: 80px;
            border-radius: 40px;
            z-index: 10;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    --smooth-corners: 8,3;
  mask-image: paint(smooth-corners);
  -webkit-mask-image: paint(smooth-corners);
  
        }
        .header {
            position: fixed;
            top: 24px;
  left: 50%;
  transform: translateX(-50%);
            width: var(--header-width);
            height: 80px;
            border-radius: 40px;
            z-index: 11;
            transition: all 0.6s cubic-bezier(.2,0,0,1);
            background: #aaa;
            backdrop-filter: blur(4px);
            gap: 16px;
            padding: 0 16px;
    mix-blend-mode: overlay;
    --smooth-corners: 8,3;
  mask-image: paint(smooth-corners);
  -webkit-mask-image: paint(smooth-corners);
        }

        .header-ctn {
            position: fixed;
            top: 24px;
  left: 50%;
  transform: translateX(-50%);
            width: var(--header-width);
            height: 80px;
            border-radius: 40px;
            z-index: 12;
            background: none;
            display: flex;
            flex-wrap: nowrap;
            white-space: nowrap;
            align-items: center;
            gap: 16px;
            padding: 0 16px;
            background:#fff6;
   box-shadow: 0px 8px 32px 0px rgba(0, 0, 0, 0.22);
        }

        .first{
              background-size: cover;
    background-position: center;
          background-image:
  linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2)),
  url(https://search3958.github.io/newtab/bgimg/glass1.webp);
            padding:32px;
          padding-top:120px;
          position:relative;
          color:#fff;
            border-radius: var(--section-raius);
            margin:10px;
            --smooth-corners: 3,3;
  mask-image: paint(smooth-corners);
  -webkit-mask-image: paint(smooth-corners);
        }

        .section{
          background:#FFFFFF;
            padding:32px;
          position:relative;
          color:#000;
            border-radius: var(--section-raius);
            margin:10px;
            --smooth-corners: 3,3;
  mask-image: paint(smooth-corners);
  -webkit-mask-image: paint(smooth-corners);
        }

        .prg-blur {
  position: absolute;
  bottom: 0;
  left: 0;
  height: 300px;
  width: 100%;
  background: rgba(255, 255, 255, 0.01);
       border-radius: calc(var(--section-raius) + 2px);

}

.prg-blur::before {
  position: absolute;
  inset: 0;
  content: "";
  backdrop-filter: blur(0.7rem);
  mask-image: linear-gradient(
    to bottom,
    rgb(0 0 0 / 0%) 0%,
    rgb(0 0 0 / 4.9%) 7.75%,
    rgb(0 0 0 / 10.4%) 11.25%,
    rgb(0 0 0 / 45%) 23.55%,
    rgb(0 0 0 / 55%) 26.45%,
    rgb(0 0 0 / 89.6%) 38.75%,
    rgb(0 0 0 / 95.1%) 42.25%,
    rgb(0 0 0 / 100%) 50%
  );

     border-radius: calc(var(--section-raius) + 2px);
}

.prg-blur::after {
  position: absolute;
  inset: 0;
  top: 25%;
  content: "";
  backdrop-filter: blur(0.7rem);
  mask-image: linear-gradient(
    to bottom,
    rgb(0 0 0 / 0%) 0%,
    rgb(0 0 0 / 4.9%) 15.5%,
    rgb(0 0 0 / 10.4%) 22.5%,
    rgb(0 0 0 / 45%) 47.1%,
    rgb(0 0 0 / 55%) 52.9%,
    rgb(0 0 0 / 89.6%) 77.5%,
    rgb(0 0 0 / 95.1%) 91.9%,
    rgb(0 0 0 / 100%) 100%
  );

   border-radius: calc(var(--section-raius) + 2px);
}
.btnflex{
  position:relative;
}
svg{
  height:50px;
  width:50px;
  position:relative;
  top:3px;
}
.header-toggle{
  border-radius:100px;
  height:60px;
  border:none;
  background:none;
}
.material-symbols-rounded{
  margin-top:-10px;
  position:relative;
  top:8px;
}
.headbtn{
  padding:8px 12px;
  border-radius:100px;
  border:none;
background:#777;
position:relative;
top:162px;
    mix-blend-mode: plus-lighter;
    color:#777;
    animation: btnanm 1s cubic-bezier(.62,0,0,1) forwards;
      animation-delay: 1.5s;
      filter:blur(8px);
        opacity: 0;
}

    @keyframes btnanm {
      to {
        top:0px;
        opacity: 1;
        filter:blur(0px);
      }
    }
.headbtn.xi{
  padding:8px 12px;
  border-radius:100px;
  border:none;
background:none;
    mix-blend-mode: multiply;
    color:#222;
    transform: translate(-100%, 0px);
}
.hda{
  color:#000;
}
h3{
  font-size:24px;
}
.scrollcard{
  border-radius:16px;
  margin-top:8px;
  display:flex;
inline-size: 100%;
overflow:scroll;
gap:16px;
}
.card{
  background:#F1F5F8;
  padding:16px;
  width:240px;
            --smooth-corners: 7,10;
  mask-image: paint(smooth-corners);
  -webkit-mask-image: paint(smooth-corners);
  flex-shrink: 0;
}
.card-icon{
  background-image: linear-gradient(90deg, #B6F0F9, #AADDFF);
  width:fit-content;
  padding:16px;
  border-radius:16px;

            --smooth-corners: 3;
  mask-image: paint(smooth-corners);
  -webkit-mask-image: paint(smooth-corners);
}
.card-title{
  font-family: "Unbounded", sans-serif;
  font-weight: 250;
  font-size:1.9em;
}
.card-text{
  color:#555555;
  margin-top:8px;
}
.card-img{
font-size:32px;
color:#3b3b3b;
    mix-blend-mode: multiply;
}
.card-btn{
  background:#B1DDFB;
  color:#011e3c;
  border:none;
inline-size: 100%;
padding:16px;
margin-top:8px;
  border-radius:16px;
            --smooth-corners: 13,3;
  mask-image: paint(smooth-corners);
  -webkit-mask-image: paint(smooth-corners);
}

.card-btn.a{
inline-size: calc(50% - 4px);
            --smooth-corners: 6.5,3;
}
.card-btn.b{
inline-size: calc(50% - 4px);
            --smooth-corners: 6.5,3;
  background:#CAEEE0;
  color:#013c28;
}
.flex{
  display:flex;
}
.nae-card{
  background:#F1F5F8;
inline-size: 100%;
  padding:16px;
  border-radius:32px 32px 16px 16px;
  margin-top:8px;
}
.nae-card.b{
  border-radius:16px 16px 32px 32px;
}
.icon-btn{
  background:none;
  border:none;
}
.all-prj-card{
  border-radius:32px;
  background:#F1F5F8;
  padding:32px;
  display:flex;
  gap:32px;
  overflow:scroll;
}
.prj-icon{
  height:64px;
  width:64px;
}
.icon-btn{
  display:block;
}
footer{
 padding:40px;
 background:#fff;
 padding-bottom:80px;
            --smooth-corners: 1;
  mask-image: paint(smooth-corners);
  -webkit-mask-image: paint(smooth-corners);
          font-family: "Unbounded", sans-serif;
          color:#A0A7AE;
          text-align: center;
}
.footer{
  height:104px;
  overflow:hidden;
}
.contact{
  background-size: cover;
    background-position: center;
          background-image:
  linear-gradient(#fff8, #fff8),
  url(https://search3958.github.io/newtab/bgimg/circle1.webp);
  display:flex;
            padding:48px;
            justify-content: space-between;
  
}
.contactbtn{
  background:#B1DDFB;
  color:#011e3c;
  border:none;
padding:32px;
  border-radius:16px;
            --smooth-corners: 13,3;
  mask-image: paint(smooth-corners);
  -webkit-mask-image: paint(smooth-corners);
}
    </style>
</head>
<body>

    <canvas id="lensFx_canvas" data-html2canvas-ignore="true"></canvas>
<div class="header" data-html2canvas-ignore="true">
</div>

<div class="header-ctn" data-html2canvas-ignore="true">
  <button class="header-toggle" onclick="window.location.href='https://search3958.github.io/'"> 

<svg xmlns="http://www.w3.org/2000/svg" width="10" height="13" viewBox="0 0 10 13" fill="none">
<path d="M0.68103 4.55652C0.68103 2.17122 2.6147 0.237549 5 0.237549C7.3853 0.237549 9.31897 2.17122 9.31897 4.55652C9.31897 6.94182 7.3853 8.87549 5 8.87549C2.6147 8.87549 0.68103 6.94182 0.68103 4.55652Z" fill="url(#paint0_radial_547_63)"/>
<foreignObject x="-3.31897" y="0.124512" width="16.6379" height="16.6379"><div xmlns="http://www.w3.org/1999/xhtml" style="clip-path:url(#bgblur_0_547_63_clip_path);height:100%;width:100%"></div></foreignObject><path data-figma-bg-blur-radius="4" d="M0.68103 8.44348C0.68103 6.05818 2.6147 4.12451 5 4.12451C7.3853 4.12451 9.31897 6.05818 9.31897 8.44348C9.31897 10.8288 7.3853 12.7625 5 12.7625C2.6147 12.7625 0.68103 10.8288 0.68103 8.44348Z" fill="url(#paint1_radial_547_63)"/>
<defs>
<clipPath id="bgblur_0_547_63_clip_path" transform="translate(3.31897 -0.124512)"><path d="M0.68103 8.44348C0.68103 6.05818 2.6147 4.12451 5 4.12451C7.3853 4.12451 9.31897 6.05818 9.31897 8.44348C9.31897 10.8288 7.3853 12.7625 5 12.7625C2.6147 12.7625 0.68103 10.8288 0.68103 8.44348Z"/>
</clipPath><radialGradient id="paint0_radial_547_63" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(5 8.87549) rotate(-90) scale(9.57372 9.57372)">
<stop stop-color="#0000"/>
<stop offset="1" stop-color="#0009"/>
</radialGradient>
<radialGradient id="paint1_radial_547_63" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(5 12.7625) rotate(-90) scale(9.57372 9.57372)">
<stop stop-color="#545454"/>
<stop offset="1" stop-color="#0003"/>
</radialGradient>
</defs>
</svg>

  </button>
  <a class="hda" href="https://search3958.github.io/">概要</a>
  <a class="hda" href="https://search3958.github.io/i/newtab/">Newtab</a>
  <a class="hda" href="https://search3958.github.io/i/tools/">ツール</a>
</div>
  
  <div class="first smooth">

    <div class="prg-blur"></div>
    <h1>Search3958</h1>
    <h2 class="toph2">私の名前はSentaroです。<br>とにかく使いやすく、便利なツールを。</h2>
    <div class="btnflex">
      <button class="headbtn" onclick="window.location.href='https://github.com/search3958/'">GitHubを見に行こう
        <span class="material-symbols-rounded">
arrow_outward
</span><md-ripple></md-ripple></button>
<button class="headbtn xi" onclick="window.location.href='https://github.com/search3958/'">GitHubを見に行こう
        <span class="material-symbols-rounded">
arrow_outward
</span><md-ripple></md-ripple></button>
    </div>
  </div>

  <div class="section smooth">
    <h3>主なプロジェクト</h3>
    <div class="scrollcard">

      <div class="card">
        <div class="card-icon"><span class="material-symbols-rounded card-img">web</span></div>
        <div class="card-title">Newtab 4</div>
        <div class="card-text">革命的な新しいタブページ体験。<br>美しいデザインと実用性を兼ね備えた次世代の新しいタブ</div>
        <div class="flex" style="gap:8px;">
        <button class="card-btn b">詳細</button>
        <button class="card-btn a" onclick="window.location.href='https://search3958.github.io/newtab'">使う</button>
        </div>
      </div>
      
      <div class="card">
        <div class="card-icon"><span class="material-symbols-rounded card-img">extension</span></div>
        <div class="card-title">ToolBoard</div>
        <div class="card-text">日常で使える便利ツールを一箇所に集約。<br>生産性向上のための新たな選択肢を提供します。</div>
        <button class="card-btn" onclick="window.location.href='https://search3958.github.io/toolboard'">使う</button>
      </div>
      
      <div class="card">
        <div class="card-icon"><span class="material-symbols-rounded card-img">psychology</span></div>
        <div class="card-title">thinkSocial</div>
        <div class="card-text">色情報も共有できるプラットフォーム。<br>従来のSNSとは一線を画した体験をお楽しみください。</div>
        <button class="card-btn">使う</button>
      </div>
      
      <div class="card">
        <div class="card-icon"><span class="material-symbols-rounded card-img">business_center</span></div>
        <div class="card-title">Tools</div>
        <div class="card-text">一番最初に作られた最もシンプルなツール集。<br>たまに使いたくなるツールを集結。</div>
        <button class="card-btn" onclick="window.location.href='https://search3958.github.io/tools'">使う</button>
      </div>
      
      <div class="card">
        <div class="card-icon"><span class="material-symbols-rounded card-img">cards_star</span></div>
        <div class="card-title">Images</div>
        <div class="card-text">ここにある画像は自由に使用できます。<br>ただし、クレジット表記は必須です。</div>
        <button class="card-btn">使う</button>
      </div>
      
    </div>
  </div>

  <div class="section smooth">
    <h3>私について</h3>

      <div class="nae-card">
        <h4>ミッション</h4>
        日常のデジタル体験をより豊かで効率的にすることを目指しています。使いやすさと美しさを両立するため、以下のことを重視しています。<br>・ユーザー中心設計<br>・モダンなUI/UX<br>・パフォーマンス重視
      </div>

      <div class="nae-card b">
        <h4>技術スタック</h4>
可能な限り最新のウェブ技術を活用し、高品質なアプリケーションを構築しています。<br>私は主に以下のタイプを扱うことができます。<br>・HTML + CSS<br>・JavaScript<br>・Flutter(少し)
      </div>
      
  </div>

  <div class="section smooth">
    <h3>他にもたくさんあります</h3>

      <div class="all-prj-card">
       
      <button class="icon-btn" onclick="window.location.href='https://search3958.github.io/newtab'">
        <img class="prj-icon" src="https://search3958.github.io/icons/newtab.svg">
        <div class="prj-txt">Newtab</div>
      </button>


      <button class="icon-btn" onclick="window.location.href='https://search3958.github.io/aisearch'">
        <img class="prj-icon" src="https://search3958.github.io/icons/aisearch.svg">
        <div class="prj-txt">AI Search</div>
      </button>


      <button class="icon-btn" onclick="window.location.href='https://search3958.github.io/firebasetext'">
        <img class="prj-icon" src="https://search3958.github.io/icons/firebasetext.svg">
        <div class="prj-txt">火源台txt</div>
      </button>


      <button class="icon-btn" onclick="window.location.href='https://search3958.github.io/games'">
        <img class="prj-icon" src="https://search3958.github.io/icons/game.svg">
        <div class="prj-txt">クソゲー</div>
      </button>


      <button class="icon-btn" onclick="window.location.href='https://search3958.github.io/aishortcut'">
        <img class="prj-icon" src="https://search3958.github.io/icons/gemini.svg">
        <div class="prj-txt">AItab</div>
      </button>


      <button class="icon-btn" onclick="window.location.href='https://search3958.github.io/m3color'">
        <img class="prj-icon" src="https://search3958.github.io/icons/material3color.svg">
        <div class="prj-txt">M3 Gen</div>
      </button>


      <button class="icon-btn" onclick="window.location.href='https://search3958.github.io/project/htmlos/1/'">
        <img class="prj-icon" src="https://search3958.github.io/icons/os.svg">
        <div class="prj-txt">Hanul OS</div>
      </button>


      <button class="icon-btn" onclick="window.location.href='https://search3958.github.io/'">
        <img class="prj-icon" src="https://search3958.github.io/icons/toolboard.svg">
        <div class="prj-txt">Toolboard</div>
      </button>


      <button class="icon-btn" onclick="window.location.href='https://search3958.github.io/toolboard'">
        <img class="prj-icon" src="https://search3958.github.io/icons/tools.svg">
        <div class="prj-txt">Tools</div>
      </button>


      <button class="icon-btn" onclick="window.location.href='https://search3958.github.io/uiscript'">
        <img class="prj-icon" src="https://search3958.github.io/icons/uiscript.svg">
        <div class="prj-txt">UI Script</div>
      </button>


      <button class="icon-btn" onclick="window.location.href='https://search3958.github.io/webmaker'">
        <img class="prj-icon" src="https://search3958.github.io/icons/webcreator.svg">
        <div class="prj-txt">Creator</div>
      </button>



      </div>
  </div>


  <div class="section smooth contact">
    <h3>何か私に伝えることが<br>ありますか？</h3>
<button class="contactbtn">フォームを憑依</button>
      
  </div>

<script>

  const lensFx_canvas   = document.getElementById("lensFx_canvas");
  const lensFx_ctx      = lensFx_canvas.getContext("2d");
  const debugInfo       = document.getElementById("debugInfo");

  const LAYERS           = 13;
  const MIN_ZOOM         = 1.8;
  const MAX_ZOOM         = 1;
  const SHRINK_STEP      = 5.5;
  const CAPTURE_INTERVAL = 1000;
  const SCROLL_CAPTURE_INTERVAL = 5000;

  let lensFx_img     = null;
  let scrollOffsetY  = 0;
  let captureTimer   = null;
  let autoUpdate     = true;
  let showDebug      = false;
  let isScrolling    = false;
  let scrollTimeout  = null;

  function safeInverseEasing(t) {
    const ε = 0.05;
    const v = 1/(t+ε) - 1/ε;
    const maxV = 1/(1+ε) - 1/ε;
    return v/maxV;
  }

  function radiusEasing(t) {
    return 0.3 + 0.7*(1 - t*t);
  }

  function updateCanvasSize(canvas, ctx) {
    const rect = canvas.getBoundingClientRect();
    const dpr  = window.devicePixelRatio||1;
    canvas.width  = rect.width * dpr;
    canvas.height = rect.height * dpr;
    ctx.setTransform(1,0,0,1,0,0);
    ctx.scale(dpr,dpr);
  }

  function getRadius(canvas) {
    return parseFloat(getComputedStyle(canvas).borderRadius) || 0;
  }

  function drawLens(img, ctx, canvasElem) {
    if (!img) return;
    
    const imgW = img.width;
    const imgH = img.height;
    const rect = canvasElem.getBoundingClientRect();
    const wLens = rect.width;
    const hLens = rect.height;
    const radius = getRadius(canvasElem);

    const canvasScreenX = rect.left;
    const canvasScreenY = rect.top + scrollOffsetY;

    const viewportW = window.innerWidth;
    const viewportH = document.documentElement.scrollHeight;
    
    const scaleX = imgW / viewportW;
    const scaleY = imgH / viewportH;
    
    const imgCenterX = (viewportW / 2) * scaleX;
    const imgCenterY = canvasScreenY * scaleY + (hLens/2) * scaleY;

    ctx.clearRect(0, 0, canvasElem.width, canvasElem.height);

    if (showDebug) {
      debugInfo.innerHTML = `
        Canvas位置: (${canvasScreenX.toFixed(0)}, ${canvasScreenY.toFixed(0)})<br>
        画像サイズ: ${imgW} x ${imgH}<br>
        ビューポート: ${viewportW} x ${viewportH}<br>
        スケール: ${scaleX.toFixed(3)} x ${scaleY.toFixed(3)}<br>
        画像上中心: (${imgCenterX.toFixed(0)}, ${imgCenterY.toFixed(0)})
      `;
    }

    for (let i = 0; i < LAYERS; i++) {
      const t = i / (LAYERS - 1);
      const zoom = MIN_ZOOM + safeInverseEasing(t) * (MAX_ZOOM - MIN_ZOOM);
      const w = wLens - i * SHRINK_STEP;
      const h = hLens - i * SHRINK_STEP;
      const dx = (wLens - w) / 2;
      const dy = (hLens - h) / 2;
      
      // 拡大する範囲を計算
      const sw = (w / zoom) * scaleX;
      const sh = (h / zoom) * scaleY;
      const sx = imgCenterX - sw / 2;
      const sy = imgCenterY - sh / 2;
      
      const rad = radius * radiusEasing(t);

      // クリッピングパスを作成
      ctx.save();
      ctx.beginPath();
      ctx.moveTo(dx + rad, dy);
      ctx.lineTo(dx + w - rad, dy);
      ctx.quadraticCurveTo(dx + w, dy, dx + w, dy + rad);
      ctx.lineTo(dx + w, dy + h - rad);
      ctx.quadraticCurveTo(dx + w, dy + h, dx + w - rad, dy + h);
      ctx.lineTo(dx + rad, dy + h);
      ctx.quadraticCurveTo(dx, dy + h, dx, dy + h - rad);
      ctx.lineTo(dx, dy + rad);
      ctx.quadraticCurveTo(dx, dy, dx + rad, dy);
      ctx.closePath();
      ctx.clip();

      // 画像を描画
      ctx.drawImage(img, sx, sy, sw, sh, dx, dy, w, h);
      ctx.restore();

    }
  }

  function renderAll() {
    updateCanvasSize(lensFx_canvas, lensFx_ctx);
    drawLens(lensFx_img, lensFx_ctx, lensFx_canvas);
  }

  async function captureFullPage() {
  try {
    const fullW = document.documentElement.scrollWidth;
    const fullH = document.documentElement.scrollHeight;
    const canvas = await html2canvas(document.body, {
      useCORS: true,
      allowTaint: true,
      scale: 1,
      width: fullW,
      height: fullH,
      scrollX: 0,
      scrollY: 0,
      backgroundColor: null,

      // ← ★ここから追加
      onclone: (clonedDoc) => {
        const targets = clonedDoc.querySelectorAll('h1, .toph2');
        const rootStyles = getComputedStyle(clonedDoc.documentElement);
        const macColor = rootStyles.getPropertyValue('--mac-color').trim();
        targets.forEach(el => {
          el.style.color = macColor;
          el.style.top = 0;
          el.style.opacity = 1;
          el.style.filter = null;
        });
        const targets2 = clonedDoc.querySelectorAll('.headbtn');
        targets2.forEach(el => {
          el.style.background = macColor;
        });
        const targets3 = clonedDoc.querySelectorAll('.toph2');
        targets3.forEach(el => {
          el.style.top = "-16px";
        });
      }
    });

    const img = new Image();
    img.onload = () => {
      lensFx_img = img;
      renderAll();
    };
    img.src = canvas.toDataURL();
  } catch (e) {
    console.error(e);
  }
}


  // コントロール関数
  function updateLensEffect() {
    captureFullPage();
  }

  function toggleAutoUpdate() {
    autoUpdate = !autoUpdate;
    if (autoUpdate) {
      captureTimer = setInterval(captureFullPage, CAPTURE_INTERVAL);
    } else {
      clearInterval(captureTimer);
    }
  }

  function toggleDebug() {
    showDebug = !showDebug;
    debugInfo.style.display = showDebug ? 'block' : 'none';
    if (showDebug) {
      renderAll();
    }
  }

  // 初期化
  captureFullPage();
  updateCaptureTimer();

  window.addEventListener("scroll", () => {
    scrollOffsetY = window.scrollY;
    renderAll();
    
    // スクロール中の処理
    isScrolling = true;
    clearTimeout(scrollTimeout);
    // ↓ ここで必ずintervalをクリア
    clearInterval(captureTimer);
    updateCaptureTimer();

    scrollTimeout = setTimeout(() => {
      isScrolling = false;
      updateCaptureTimer();
    }, 150);
  });

  function updateCaptureTimer() {
    // 既存のintervalを必ずクリア
    if (captureTimer) {
      clearInterval(captureTimer);
      captureTimer = null;
    }
    if (autoUpdate) {
      const interval = isScrolling ? SCROLL_CAPTURE_INTERVAL : CAPTURE_INTERVAL;
      captureTimer = setInterval(captureFullPage, interval);
    }
  }

  window.addEventListener("resize", renderAll);
  
  // ResizeObserver
  if (window.ResizeObserver) {
    const resizeObserver = new ResizeObserver(() => {
      syncWidth();
    });
    
    // headerとcanvasの両方を監視
    resizeObserver.observe(header);
    resizeObserver.observe(lensFx_canvas);
  }


  const header = document.querySelector('.header');
  let isExpanded = false;

// headerの幅をlensFx_canvasに同期させる関数
function syncWidth() {
  lensFx_canvas.style.width = `${header.offsetWidth}px`;
  renderAll();
}

// ResizeObserverの設定
if (window.ResizeObserver) {
  const resizeObserver = new ResizeObserver(() => {
    syncWidth();
  });
  
  // headerとcanvasの両方を監視
  resizeObserver.observe(header);
  resizeObserver.observe(lensFx_canvas);
}

// MutationObserverの設定
const mutationObserver = new MutationObserver(() => {
  syncWidth();
});

// headerのstyle属性の変更を監視
mutationObserver.observe(header, {
  attributes: true,
  attributeFilter: ['style']
});

// 初期同期
syncWidth();

// ヘッダーの開閉処理を追加
const headerToggle = document.querySelector('.header-toggle');

headerToggle.addEventListener('click', () => {
  header.classList.toggle('active');
  syncWidth(); // 既存の同期関数を呼び出し
});
</script>
<script>
function updateSmoothCorners() {
  // 対象: .smooth クラスを持つ要素
  const elements = document.querySelectorAll('.smooth');

  elements.forEach(el => {
    // 現在の computed style で --smooth-corners が使われているかチェック
    const style = getComputedStyle(el);
    const hasSmoothCorners = style.getPropertyValue('--smooth-corners');

    if (hasSmoothCorners !== '') {
      const height = el.offsetHeight;
      const width = el.offsetWidth;
      const smoothValue = `${(width / 50).toFixed(2)}, ${(height / 50).toFixed(2)}`;
      el.style.setProperty('--smooth-corners', smoothValue);
    }
  });
}

// 初回実行
updateSmoothCorners();

// ウィンドウサイズ変更時にも再計算
window.addEventListener('resize', updateSmoothCorners);

// DOM追加時にも対応（必要なら）
const observer = new MutationObserver(updateSmoothCorners);
observer.observe(document.body, { childList: true, subtree: true });
</script>
<script>
  if (CSS && 'paintWorklet' in CSS) CSS.paintWorklet.addModule('https://unpkg.com/smooth-corners')
</script>

<div class="footer">
<footer class="smooth">
  © Search 3958
</footer>
</div>

</body>  <script src="check.js"></script>
</html>