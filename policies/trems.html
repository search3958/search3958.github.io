<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Markdown Viewer</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=M+PLUS+2:wght@100..900&display=swap" rel="stylesheet">
<script>
if ("paintWorklet" in CSS) {
  const workletCode = `
    const drawSquircle=(ctx,geom,radii,smooth,lineWidth,color)=>{const defaultFill=color;const lineWidthOffset=lineWidth/2;ctx.beginPath();ctx.lineTo(radii[0],lineWidthOffset);ctx.lineTo(geom.width-radii[1],lineWidthOffset);ctx.bezierCurveTo(geom.width-radii[1]/smooth,lineWidthOffset,geom.width-lineWidthOffset,radii[1]/smooth,geom.width-lineWidthOffset,radii[1]);ctx.lineTo(geom.width-lineWidthOffset,geom.height-radii[2]);ctx.bezierCurveTo(geom.width-lineWidthOffset,geom.height-radii[2]/smooth,geom.width-radii[2]/smooth,geom.height-lineWidthOffset,geom.width-radii[2],geom.height-lineWidthOffset);ctx.lineTo(radii[3],geom.height-lineWidthOffset);ctx.bezierCurveTo(radii[3]/smooth,geom.height-lineWidthOffset,lineWidthOffset,geom.height-radii[3]/smooth,lineWidthOffset,geom.height-radii[3]);ctx.lineTo(lineWidthOffset,radii[0]);ctx.bezierCurveTo(lineWidthOffset,radii[0]/smooth,radii[0]/smooth,lineWidthOffset,radii[0],lineWidthOffset);ctx.closePath();if(lineWidth){ctx.strokeStyle=defaultFill;ctx.lineWidth=lineWidth;ctx.stroke()}else{ctx.fillStyle=defaultFill;ctx.fill()}};class SquircleClass{static get contextOptions(){return{alpha:true}}static get inputProperties(){return["--squircle-radius","--squircle-radius-top-left","--squircle-radius-top-right","--squircle-radius-bottom-right","--squircle-radius-bottom-left","--squircle-smooth","--squircle-outline","--squircle-fill"]}paint(ctx,geom,properties){const smoothRatio=10;const distanceRatio=1.8;const squircleSmooth=parseFloat(properties.get("--squircle-smooth")*smoothRatio);const individualRadiiProps=SquircleClass.inputProperties.slice(1,5);let squircleRadii=individualRadiiProps.map(prop=>{const value=properties.get(prop);return value?parseInt(value,10)*distanceRatio:NaN});let shorthand_R;if(squircleRadii.some(isNaN)){const radiusRegex=/([0-9]+[a-z%]*)/g;const radius_shorthand=properties.get("--squircle-radius").toString();const matches=radius_shorthand.match(radiusRegex);if(matches){shorthand_R=matches.map(val=>parseInt(val,10)*distanceRatio);while(shorthand_R.length<4){if(shorthand_R.length===1){shorthand_R.push(shorthand_R[0])}else if(shorthand_R.length===2){shorthand_R=[shorthand_R[0],shorthand_R[1],shorthand_R[0],shorthand_R[1]]}else if(shorthand_R.length===3){shorthand_R=[shorthand_R[0],shorthand_R[1],shorthand_R[2],shorthand_R[1]]}}}else{const defaultRadius=squircleRadii.every(isNaN)?8*distanceRatio:0;shorthand_R=[defaultRadius,defaultRadius,defaultRadius,defaultRadius]}}squircleRadii=squircleRadii.map((val,i)=>isNaN(val)?shorthand_R[i]:val);const squrcleOutline=parseFloat(properties.get("--squircle-outline"),10);const squrcleColor=properties.get("--squircle-fill").toString();const isSmooth=()=>{if(typeof properties.get("--squircle-smooth")[0]!=="undefined"){if(squircleSmooth===0){return 1}return squircleSmooth}else{return 10}};const isOutline=()=>{if(squrcleOutline){return squrcleOutline}else{return 0}};const isColor=()=>{if(squrcleColor){return squrcleColor}else{return"#f45"}};const maxRadius=Math.max(...squircleRadii);if(maxRadius<geom.width/2&&maxRadius<geom.height/2){drawSquircle(ctx,geom,squircleRadii,isSmooth(),isOutline(),isColor())}else{const minRadius=Math.min(geom.width/2,geom.height/2);drawSquircle(ctx,geom,squircleRadii.map(()=>minRadius),isSmooth(),isOutline(),isColor())}}}if(typeof registerPaint!=="undefined"){registerPaint("squircle",SquircleClass)}
  `;
  const blob = new Blob([workletCode], { type: 'application/javascript' });
  const blobURL = URL.createObjectURL(blob);
  CSS.paintWorklet.addModule(blobURL);
}
</script>
<style>
    *{
        font-family: "M PLUS 2", sans-serif;
    }
    body{
        background:#E9E9E9;
        color:#111;
    padding: 80px;
    }
  #md-container {
    font-family: sans-serif;
    line-height: 1.5;
    background:#FFF;
    padding:40px;
    mask-image: paint(squircle);
    --squircle-radius: 55px;
    --squircle-smooth: 0.7;
  }
  svg{
    margin-bottom:24px;
  }
</style>
</head>
<body>
<a href="https://search3958.github.io">
<svg width="100" height="100" viewBox="0 0 33 34" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M33 34H27V31.0435H21V34H12V31.0435H3V34H0V0H33V34ZM12 31.0435H15V28.087H12V31.0435ZM18 31.0435H21V28.087H18V31.0435ZM27 31.0435H30V28.087H27V31.0435ZM3 28.087H12V25.1304H6V22.1739H15V19.2174H3V28.087ZM21 28.087H27V25.1304H21V28.087ZM18 25.1304H21V22.1739H18V25.1304ZM27 25.1304H30V22.1739H27V25.1304ZM21 22.1739H27V19.2174H21V22.1739ZM6 17.7391H12V14.7826H6V17.7391ZM21 17.7391H27V14.7826H21V17.7391ZM3 14.7826H6V11.8261H3V14.7826ZM12 14.7826H15V11.8261H12V14.7826ZM27 8.86957H21V11.8261H27V14.7826H30V5.91304H27V8.86957ZM9 11.8261H12V8.86957H9V11.8261ZM3 8.86957H6V5.91304H3V8.86957ZM12 8.86957H15V5.91304H12V8.86957ZM18 8.86957H21V5.91304H18V8.86957ZM6 5.91304H12V2.95652H6V5.91304ZM21 5.91304H27V2.95652H21V5.91304Z" fill="#000"/>
</svg>
</a>

<div id="md-container">読み込み中...</div>

<script>
async function loadMarkdown() {
  const url = 'https://search3958.github.io/policies/%E5%88%A9%E7%94%A8%E8%A6%8F%E7%B4%84.md';
  try {
    const response = await fetch(url);
    let text = await response.text();

    // 行ごとに分割
    const lines = text.split('\n');

    // # と ## を <h1> <h2> に変換
    const htmlLines = lines.map(line => {
      if (line.startsWith('## ')) {
        return '<h2>' + line.slice(3).trim() + '</h2>';
      } else if (line.startsWith('# ')) {
        return '<h1>' + line.slice(2).trim() + '</h1>';
      } else {
        return '<p>' + line.trim() + '</p>';
      }
    });

    // divに挿入
    document.getElementById('md-container').innerHTML = htmlLines.join('\n');
  } catch (err) {
    document.getElementById('md-container').textContent = '読み込みに失敗しました';
    console.error(err);
  }
}

loadMarkdown();
</script>

</body>
</html>
