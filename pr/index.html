<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI & Developer Future (Hyper-Sync Final)</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <style>
        :root { 
            --primary-color: #b30000; 
            --bg-color: #8b0000; 
            --ui-bg: rgba(30, 30, 30, 0.9); 
            --accent-green: #00ff00;
        }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background-color: var(--bg-color); font-family: 'Pretendard', 'Apple SD Gothic Neo', sans-serif; color: white; }
        
        /* 로더 (Loader) */
        #loader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 9999; }
        .progress-container { width: 350px; height: 6px; background: #222; margin-top: 30px; border-radius: 3px; overflow: hidden; border: 1px solid #444; }
        #progress-bar { width: 0%; height: 100%; background: var(--primary-color); transition: width 0.2s; }

        /* 메인 슬라이드 표시 영역 */
        #slide-container { width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center; position: relative; overflow: hidden; background: #000; }
        .asset-wrapper { 
            width: 100%; height: 100%; 
            position: absolute; 
            display: flex; justify-content: center; align-items: center; 
            will-change: transform, opacity;
            background: #000;
        }
        .slide-asset { max-width: 100%; max-height: 100%; object-fit: contain; }

        /* 우리 길동무 (Presenter View) */
        #presenter-view { 
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; 
            background: #790000; display: none; grid-template-columns: 1fr 450px;
            grid-template-rows: 70px 1fr 220px; z-index: 2000;
        }

        .p-header {
            grid-column: 1 / span 2;
            background: #aa0000;
            display: flex;
            align-items: center;
            padding: 0 25px;
            gap: 40px;
            border-bottom: 2px solid #ff6666;
        }
        .p-notes-area { grid-row: 2 / span 2; padding: 40px; overflow-y: auto; background: #050505; border-right: 2px solid #333; }
        .p-preview-area { padding: 20px; background: #340000; display: flex; flex-direction: column; align-items: center; border-bottom: 2px solid #333; }
        
        .p-mini-stage { width: 100%; height: 250px; background: #000; border: 1px solid #333; position: relative; overflow: hidden; display: flex; justify-content: center; }

        .p-controls { padding: 25px; background: #340000; display: flex; flex-direction: column; gap: 20px; }

        .big-btn { flex: 1; padding: 25px; font-size: 24px; font-weight: bold; cursor: pointer; border: none; border-radius: 100px; background: var(--primary-color); color: white; transition: 0.2s; }
        .big-btn:hover { background: #ff0000; }
        .big-btn:active { transform: scale(0.95); }
        .btn-group { display: flex; gap: 15px; width: 100%; }
        
        .timer { font-family: monospace; font-size: 40px; color: #ffdf5f; }
        .sync-tag { font-size: 13px; color: #aaa; }
        input[type="number"] {
            background: #910000;
            border: none;
            color: white;
            padding: 16px 32px;
            width: 100px;
            border-radius: 100px;
            font-size: 48px;
            text-align: center;
            display: block;
        }
        #page-num { position: fixed; bottom: 30px; left: 30px; color: rgba(255,255,255,0.4); font-size: 15px; z-index: 100; }
        .normal-controls { position: fixed; bottom: 30px; right: 30px; display: flex; gap: 10px; z-index: 1000; }
        .normal-controls button { padding: 12px 20px; border: none; border-radius: 8px; background: var(--ui-bg); color: white; cursor: pointer; font-size: 14px; }
    </style>
</head>
<body>

<div id="loader">
    <div id="load-status"><span style="font-size:3.5em; font-family:serif; font-weight:bold; background:#ce0000; padding:20px; border-radius:4px;">사회주의 만세!</span></div>
    <div class="progress-container"><div id="progress-bar"></div></div>
</div>

<div id="presenter-view">
    <div class="p-header">
        <div class="timer" id="p-stopwatch">00:00:00</div>
        <div style="display:flex; gap:10px;">
            <button onclick="toggleTimer()" style="background: #d82020; color: #eef3ee; padding: 14px 16px; cursor: pointer; border-radius: 100px; border: none;">시작/멎기</button>
            <button onclick="resetTimer()" style="background: #d82020; color: #eef3ee; padding: 14px 16px; cursor: pointer; border-radius: 100px; border: none;">초기화</button>
        </div>
        <div class="sync-tag" id="p-sync-time">최근 동기화: ---</div>
    </div>

    <div class="p-notes-area">
        <div style="margin-bottom:25px; background:#1a1a1a; padding:15px; border-radius:8px;">
            <label style="color:#aaa;">글자 크기 조절: </label>
            <input type="range" id="memo-font-slider" min="18" max="60" value="28" style="width:200px; vertical-align:middle;" oninput="adjustFontSize(this.value)">
        </div>
        <div id="p-memo-text" style="font-size:28px; line-height:1.8; white-space: pre-wrap;"></div>
    </div>

    <div class="p-preview-area">
        <div class="p-mini-stage" id="mini-stage"></div>
        <div style="margin-top: 25px; font-size: 40px; text-align: center;">
            현재 쪽수: <input type="number" id="p-page-input" min="1" onchange="jumpToPage(this.value)"> / <span id="p-total-pages">0</span>
        </div>
    </div>

    <div class="p-controls">
        <div class="btn-group">
            <button class="big-btn" onclick="prevImage()" style="background:#540000;">뒤로</button>
            <button class="big-btn" onclick="nextImage()">앞으로</button>
        </div>
        <button onclick="togglePresenterMode()" style="background: transparent; border: none; color: #f7ffbc; padding: 10px; cursor: pointer;">일반 화면으로 돌아가기</button>
    </div>
</div>

<div id="slide-container">
    <div id="main-stage" style="width:100%; height:100%;"></div>
</div>

<div id="page-num">0 / 0</div>
<div class="normal-controls">
    <button onclick="prevImage()">뒤로</button>
    <button onclick="nextImage()">앞으로</button>
    <button onclick="togglePresenterMode()" style="font-weight:bold;">우리<span style="font-size:1.2em;font-family:serif;">길</span>동무</button>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyDjMhqOjKoGgzvUsn0QXm2sX-epnw7yhhc",
        authDomain: "tangle-sns.firebaseapp.com",
        databaseURL: "https://tangle-sns-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "tangle-sns",
        storageBucket: "tangle-sns.firebasestorage.app",
        messagingSenderId: "248303876559",
        appId: "1:248303876559:web:b8c6b6a28cdc93fa3a3aba"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const slideRef = db.ref('presentation/currentSlide');

    const slides = [1, 2, 3, 4, 5, "V1", "V2", "V3", "V4", 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21];
    const memos = [
        "1: \n生成AI時代、人間の開発者は\n絶滅するのか\nということで\nリアルを調べてきた。",
        "2: \n今回は、ソフトウェアと\nハードウェアの両面から、\n開発者の『今』と\n『これから』を\n深掘り。\n\n深掘=ふかぼ",
        "3: \n結論、生き残れます！ \nただし基礎と新技術の欲張りは必須で\n特にハードウェアは、\n自分が設計した限りAIには\nまだ荷が重い作業だった。\n\n荷=に 니",
        "4: \nそれでもAIを否定するより、\nまずは使い倒すのが正解。\nAIに土台を作らせつつ、\n自分は地味に裏側を\n理解していくという\nこの『二刀流』が最短ルートです。\n\n二刀流=にとうりゅう",
        "5: \nここからは、\nAIが自分に\nどんな知識と変化をもたらしたか、\nその軌跡をたどります。",
        "6: \n2023年に自分のAIライフがスタート。\n当時は知識ゼロで、とにかく\n『AI全振り』\nで色々作り始めました。",
        "7: \n2024年には\n基礎も追いつき、\n配信まで開始。\n同じクラスの人から\n自作Webサービスを\n使ってもらえるようになり、\n(少し調子に乗り)手応えを感じた。",
        "8: \n2025年には本格開発。\nアクティブユーザーも100人を超えました。\n小4の知識ゼロ時代から、\nAIという最強の家庭教師のおかげで、\nWebアプリの基礎はほぼ身についた。",
        "9: \nそして今年、\nついにアプリ開発に突入。\n今はまだ『ざっくり理解』ですが、\nAIを使って一歩ずつ身についていく\n感覚がすごくあり。",
        "10: \nじゃあ、\nAIを使い倒して気づいた\nこいつらの正体について、\nいくつかシェアします。",
        "11: \n簡単なWebアプリなら\nAIは天才ですが、\n複雑なものを全部任せると\n『確実に事故る』ので要注意。",
        "12: \nAIはエラーなんて絶対起きん\nというすごいポジティブ思考で書くので、\n例外起きた時の処理がガタガタ。\n拡張性ゼロ의 コードを\n渡されることもあります。",
        "13: \nでも、GLM、千问\nClaudeはかなり優秀。\n特にGeminiは『速度がバケモン』\nなので、結局よく使います。",
        "14: \nとはいえ得意なのはやっぱりテキスト系。\n仕様書の解説や骨組み作り、\nバグの捜査。\nただし、バグの『特定』\nは人間の直感の方が\n早かったりします。\n\n細かいバグの修正や、PCB設計、\nGUIなどのグラフィック系はまだ苦手科目。\nAIにも弱点はあります。\n\n捜査=そうさ 소으사",
        "15: \n知識量だけでAIに勝っても，\n『知識の倉庫』になっただけで、\n使い手になったわけではない。\nソフトウェア開発の暗記勝負\nは、もう厳しいです。",
        "16: \nでも、仕事が奪われるわけじゃない。\n『共存』こそが正解で\nプロンプト力を磨くより、\n『どういう構造にすべきか』\nを考える監督力を\n鍛えるチャンスです。\n\n監督力=かんとくりょく 깐또력",
        "17: \n開発速度は異次元になります。\n作ってから学ぶ方が\n構造も頭に入る。\n今は『書く』より、\nAIのコードを『読み解く』力\nさえあれば困りません。しかしAIの知識が\n常に最新とは限りません。",
        "18: \nどこを任せ、\nどこを自分でやるか\nという『使い分けスキル』が、\nこれからの武器になる。\nと自分は思っています",
        "19: \n動画制作で実写かCGかを選ぶように、\nプログラミングでも\n『こだわりポイント』\nによって道具を使い分けるのが\n重要です。",
        "20: \n色々言ってきましたがAI以前に、\n重要なこともあります",
        "21: \n自分に害がないなら\n何でもチャレンジする精神が必要。\nその経験は、いつか\nお宝に化けますので。",
        "22: \nまた明確なゴールを決めること\nをお勧めします。\n3Dやアプリ開発も、\n作りたいものを決めて\n再チャレンジすれば、\n意外とサクッと作れるようになります。\nAIに聞かなくても\n達成できます",
        "23: \n今は関係なさそうな\n記事や本なんかを読むのも意外と大事。\n全部AI任せにしていると、\n特殊な知識が身につきにくいです。",
        "24: \nまとめるとAIは文章系が得意な良い동무。\n共存し，知識を得ることを\n目的に学習すれば、\nより良くなっていくはずです。\n고맙습니다!"
    ];

    let currentIndex = -1;
    const FPS = 24;
    // ビデオの開始時間と終了時間を定義
    const videoCheckpoints = { 
        "V1": { start: 0, end: 30/FPS }, 
        "V2": { start: 31/FPS, end: 78/FPS }, 
        "V3": { start: 79/FPS, end: 113/FPS }, 
        "V4": { start: 114/FPS, end: 150/FPS } 
    };

    function createSlideElement(idx) {
        const wrapper = document.createElement('div');
        wrapper.className = 'asset-wrapper';
        const slideKey = slides[idx];

        if (typeof slideKey === 'string' && videoCheckpoints[slideKey]) {
            const video = document.createElement('video');
            video.className = 'slide-asset';
            video.src = "main.webm";
            video.muted = true;
            video.playsInline = true;
            
            // 指定の終了ポイントで停止
            video.addEventListener('timeupdate', () => {
                const cp = videoCheckpoints[slideKey];
                if (video.currentTime >= cp.end) {
                    video.pause();
                    video.currentTime = cp.end; 
                }
            });

            wrapper.appendChild(video);
            wrapper._isVid = true;
            wrapper._vidObj = video;
            wrapper._slideKey = slideKey;
        } else {
            const img = new Image();
            img.className = 'slide-asset';
            img.src = `${slideKey}.webp`;
            wrapper.appendChild(img);
        }
        return wrapper;
    }

    function updateStages(newIdx) {
        if (newIdx === currentIndex) return;
        const isForward = newIdx > currentIndex;
        const mainStage = document.getElementById('main-stage');
        const miniStage = document.getElementById('mini-stage');

        [mainStage, miniStage].forEach(stage => {
            const oldWrapper = stage.querySelector('.asset-wrapper');
            const newWrapper = createSlideElement(newIdx);

            // 画像から画像への遷移のみアニメーション
            if (oldWrapper && !newWrapper._isVid && !oldWrapper._isVid) {
                newWrapper.style.transform = `translateX(${isForward ? 100 : -100}vw)`;
                stage.appendChild(newWrapper);
                newWrapper.offsetHeight; 

                const duration = 800;
                newWrapper.style.transition = `transform ${duration}ms cubic-bezier(0.8, 0, 0, 1)`;
                oldWrapper.style.transition = `transform ${duration}ms cubic-bezier(0.8, 0, 0, 1)`;
                
                newWrapper.style.transform = 'translateX(0)';
                oldWrapper.style.transform = `translateX(${isForward ? -100 : 100}vw)`;
                setTimeout(() => { if(oldWrapper.parentNode) stage.removeChild(oldWrapper); }, duration);
            } else {
                // ビデオが含まれる場合は即時切り替え
                stage.innerHTML = '';
                stage.appendChild(newWrapper);
                if (newWrapper._isVid) {
                    const cp = videoCheckpoints[newWrapper._slideKey];
                    newWrapper._vidObj.currentTime = cp.start; // 開始位置へジャンプ
                    newWrapper._vidObj.play().catch(e => console.warn("Video play failed:", e));
                }
            }
        });

        currentIndex = newIdx;
        document.getElementById('p-memo-text').innerText = memos[currentIndex] || "";
        document.getElementById('page-num').innerText = `${currentIndex + 1} / ${slides.length}`;
        document.getElementById('p-page-input').value = currentIndex + 1;
        document.getElementById('p-total-pages').innerText = slides.length;
    }

    // Firebase Sync
    slideRef.on('value', s => {
        const val = s.val() || 0;
        updateStages(val);
        document.getElementById('p-sync-time').innerText = "최근 동기화: " + new Date().toLocaleTimeString();
    });

    function nextImage() { if(currentIndex < slides.length - 1) slideRef.set(currentIndex + 1); }
    function prevImage() { if(currentIndex > 0) slideRef.set(currentIndex - 1); }
    function jumpToPage(p) { let i = parseInt(p) - 1; if(i >= 0 && i < slides.length) slideRef.set(i); }
    function togglePresenterMode() {
        const pv = document.getElementById('presenter-view');
        pv.style.display = (pv.style.display === "grid") ? "none" : "grid";
    }
    function adjustFontSize(size) { document.getElementById('p-memo-text').style.fontSize = size + "px"; }

    // Timer Logic
    let timerInterval, secondsElapsed = 0;
    function toggleTimer() {
        if (timerInterval) { clearInterval(timerInterval); timerInterval = null; }
        else {
            timerInterval = setInterval(() => {
                secondsElapsed++;
                const h = String(Math.floor(secondsElapsed / 3600)).padStart(2, '0');
                const m = String(Math.floor((secondsElapsed % 3600) / 60)).padStart(2, '0');
                const s = String(secondsElapsed % 60).padStart(2, '0');
                document.getElementById('p-stopwatch').innerText = `${h}:${m}:${s}`;
            }, 1000);
        }
    }
    function resetTimer() { secondsElapsed = 0; document.getElementById('p-stopwatch').innerText = "00:00:00"; }

    // Loader logic
    window.onload = () => {
        const bar = document.getElementById('progress-bar');
        let b = 0;
        const itv = setInterval(() => {
            b += 5;
            bar.style.width = b + '%';
            if(b >= 100) {
                clearInterval(itv);
                document.getElementById('loader').style.display = 'none';
            }
        }, 50);
    };

    document.addEventListener('keydown', (e) => {
        if (e.key === "ArrowRight" || e.key === " ") nextImage();
        if (e.key === "ArrowLeft") prevImage();
        if (e.key === "g" || e.key === "G") togglePresenterMode();
    });
</script>
</body>
</html>